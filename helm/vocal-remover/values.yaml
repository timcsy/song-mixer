# 全域設定
global:
  imageRegistry: ghcr.io
  imagePullSecrets: []

# 應用程式設定
app:
  name: "人聲去除服務"
  debug: false

# API 服務
api:
  replicaCount: 2
  image:
    repository: ""  # 需設定，例如: ghcr.io/username/vocal-remover-api
    tag: latest
    pullPolicy: IfNotPresent
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  service:
    type: ClusterIP
    port: 8000

# Worker 服務
worker:
  replicaCount: 1
  image:
    repository: ""  # 需設定，例如: ghcr.io/username/vocal-remover-api
    tag: latest
    pullPolicy: IfNotPresent
  resources:
    requests:
      memory: "2Gi"
      cpu: "1000m"
    limits:
      memory: "8Gi"
      cpu: "4000m"
  # GPU 設定
  gpu:
    enabled: true
    count: 1
  # 暫存空間
  tmpStorage:
    sizeLimit: 10Gi

# Frontend 服務
frontend:
  replicaCount: 1
  image:
    repository: ""  # 需設定，例如: ghcr.io/username/vocal-remover-frontend
    tag: latest
    pullPolicy: IfNotPresent
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "200m"
  service:
    type: ClusterIP
    port: 80

# Redis 設定
redis:
  enabled: true
  image:
    repository: redis
    tag: 7-alpine
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  persistence:
    enabled: true
    size: 1Gi
    storageClass: ""

# MinIO 設定
minio:
  enabled: true
  image:
    repository: minio/minio
    tag: latest
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  persistence:
    enabled: true
    size: 50Gi
    storageClass: ""
  auth:
    accessKey: "minioadmin"
    secretKey: "minioadmin"  # 生產環境請更改

# 處理設定
processing:
  maxUploadSize: 524288000  # 500MB
  maxVideoDuration: 600     # 10 分鐘
  rateLimitRequests: 12
  rateLimitWindow: 3600     # 1 小時
  resultExpiryHours: 24
  jobTimeoutMinutes: 30
  device: "cuda"            # cuda 或 cpu

# Ingress 設定
ingress:
  enabled: true
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/proxy-body-size: "500m"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "600"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "600"
  hosts:
    - host: ""  # 留空使用 IP，或設定域名
      paths:
        - path: /
          pathType: Prefix
  tls: []
  #  - secretName: vocal-remover-tls
  #    hosts:
  #      - vocal-remover.example.com

# KEDA 自動擴展（選用）
keda:
  enabled: false
  minReplicaCount: 1
  maxReplicaCount: 5
  pollingInterval: 15
  cooldownPeriod: 300
  listLength: 5
